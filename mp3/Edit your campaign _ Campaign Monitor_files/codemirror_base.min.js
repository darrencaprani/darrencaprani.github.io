var internetExplorer=document.selection&&window.ActiveXObject&&/MSIE/.test(navigator.userAgent),webkit=/AppleWebKit/.test(navigator.userAgent),safari=/Apple Computers, Inc/.test(navigator.vendor);function method(b,e){return function(){b[e].apply(b,arguments)}}var StopIteration={toString:function(){return"StopIteration"}};function forEach(b,e){if(b.next)try{for(;;)e(b.next())}catch(c){if(c!=StopIteration)throw c;}else for(var f=0;f<b.length;f++)e(b[f])}
function map(b,e){var c=[];forEach(b,function(b){c.push(e(b))});return c}function matcher(b){return function(e){return b.test(e)}}function hasClass(b,e){var c=b.className;return c&&RegExp("(^| )"+e+"($| )").test(c)}function insertAfter(b,e){e.parentNode.insertBefore(b,e.nextSibling);return b}function removeElement(b){b.parentNode&&b.parentNode.removeChild(b)}function clearElement(b){for(;b.firstChild;)b.removeChild(b.firstChild)}
function isAncestor(b,e){for(;e=e.parentNode;)if(b==e)return!0;return!1}var nbsp="\u00a0",matching={"{":"}","[":"]","(":")","}":"{","]":"[",")":"("};function normalizeEvent(b){if(!b.stopPropagation)b.stopPropagation=function(){this.cancelBubble=!0},b.preventDefault=function(){this.returnValue=!1};if(!b.stop)b.stop=function(){this.stopPropagation();this.preventDefault()};if(b.type=="keypress")b.code=b.charCode==null?b.keyCode:b.charCode,b.character=String.fromCharCode(b.code);return b}
function addEventHandler(b,e,c,f){function h(b){c(normalizeEvent(b||window.event))}if(typeof b.addEventListener=="function"){if(b.addEventListener(e,h,!1),f)return function(){b.removeEventListener(e,h,!1)}}else if(b.attachEvent("on"+e,h),f)return function(){b.detachEvent("on"+e,h)}}function nodeText(b){return b.textContent||b.innerText||b.nodeValue||""}function nodeTop(b){for(var e=0;b.offsetParent;)e+=b.offsetTop,b=b.offsetParent;return e}function isBR(b){b=b.nodeName;return b=="BR"||b=="br"}
function isSpan(b){b=b.nodeName;return b=="SPAN"||b=="span"};window.stringStream=function(b){function e(){for(;f==c.length;){h+=c;c="";f=0;try{c=b.next()}catch(e){if(e!=StopIteration)throw e;else return!1}}return!0}var c="",f=0,h="";return{peek:function(){return!e()?null:c.charAt(f)},next:function(){if(!e())if(h.length>0)throw"End of stringstream reached without emptying buffer ('"+h+"').";else throw StopIteration;return c.charAt(f++)},get:function(){var b=h;h="";f>0&&(b+=c.slice(0,f),c=c.slice(f),f=0);return b},push:function(b){c=c.slice(0,f)+b+c.slice(f)},
lookAhead:function(e,j,i,a){function d(d){return a?d.toLowerCase():d}var e=d(e),g=!1,n=h,p=f;for(i&&this.nextWhileMatches(/[\s\u00a0]/);;){var i=f+e.length,t=c.length-f;if(i<=c.length){g=e==d(c.slice(f,i));f=i;break}else if(e.slice(0,t)==d(c.slice(f))){h+=c;c="";try{c=b.next()}catch(l){break}f=0;e=e.slice(t)}else break}if(!g||!j)c=h.slice(n.length)+c,f=p,h=n;return g},more:function(){return this.peek()!==null},applies:function(b){var c=this.peek();return c!==null&&b(c)},nextWhile:function(b){for(var c;(c=
this.peek())!==null&&b(c);)this.next()},matches:function(b){var c=this.peek();return c!==null&&b.test(c)},nextWhileMatches:function(b){for(var c;(c=this.peek())!==null&&b.test(c);)this.next()},equals:function(b){return b===this.peek()},endOfLine:function(){var b=this.peek();return b==null||b=="\n"}}};var select={};
(function(){function b(a,d){for(;a&&a.parentNode!=d;)a=a.parentNode;return a}function e(a,d){for(;!a.previousSibling&&a.parentNode!=d;)a=a.parentNode;return b(a.previousSibling,d)}select.ie_selection=document.selection&&document.selection.createRangeCollection;select.scrollToNode=function(a){if(a){for(var d=a.ownerDocument,g=d.body,b=d.defaultView||d.parentWindow,d=d.documentElement,c=!a.nextSibling||!a.nextSibling.nextSibling||!a.nextSibling.nextSibling.nextSibling,t=0;a&&!a.offsetTop;)t++,a=a.previousSibling;
t==0&&(c=!1);t*=a?a.offsetHeight:0;for(var l=0;a&&a.offsetParent;)t+=a.offsetTop,isBR(a)||(l+=a.offsetLeft),a=a.offsetParent;var a=g.scrollLeft||d.scrollLeft||0,g=g.scrollTop||d.scrollTop||0,e=l-a,f=t-g,h=!1;if(e<0||e>(b.innerWidth||d.clientWidth||0))a=l,h=!0;if(f<0||c||f>(b.innerHeight||d.clientHeight||0)-50)g=c?1E6:t,h=!0;h&&b.scrollTo(a,g)}};select.scrollToCursor=function(a){select.scrollToNode(select.selectionTopNode(a,!0)||a.firstChild)};var c=null;select.snapshotChanged=function(){if(c)c.changed=
!0};select.snapshotReplaceNode=function(a,d,g,b){function p(p){if(a==p.node)c.changed=!0,g&&p.offset>g?p.offset-=g:(p.node=d,p.offset+=b||0)}c&&(p(c.start),p(c.end))};select.snapshotMove=function(a,d,g,b,p){function e(l){if(a==l.node&&(!p||l.offset==0))c.changed=!0,l.node=d,l.offset=b?Math.max(0,l.offset+g):g}c&&(e(c.start),e(c.end))};if(select.ie_selection){var f=function(a,d){function g(a){for(var d=null;!d&&a;)d=a.nextSibling,a=a.parentNode;return b(d)}function b(a){for(;a&&a.firstChild;)a=a.firstChild;
return{node:a,offset:0}}var c=a.document.selection.createRange();c.collapse(d);var e=c.parentElement();if(!isAncestor(a.document.body,e))return null;if(!e.firstChild)return b(e);var l=c.duplicate();l.moveToElementText(e);l.collapse(!0);for(var f=e.firstChild;f;f=f.nextSibling){if(f.nodeType==3){var h=f.nodeValue.length;l.move("character",h)}else l.moveToElementText(f),l.collapse(!1);var j=c.compareEndPoints("StartToStart",l);if(j==0)return g(f);if(j!=1){if(f.nodeType!=3)return b(f);l.setEndPoint("StartToEnd",
c);return{node:f,offset:h-l.text.length}}}return g(e)};select.markSelection=function(a){c=null;if(a.document.selection){var d=f(a,!0),g=f(a,!1);d&&g&&(c={start:d,end:g,window:a,changed:!1})}};select.selectMarked=function(){function a(a){var g=d.body.createTextRange(),b=a.node;if(b)if(b.nodeType==3){g.moveToElementText(b.parentNode);for(a=a.offset;b.previousSibling;)b=b.previousSibling,a+=(b.innerText||"").length;g.move("character",a)}else g.moveToElementText(b),g.collapse(!0);else g.moveToElementText(c.window.document.body),
g.collapse(!1);return g}if(c&&c.changed){var d=c.window.document,g=a(c.start),b=a(c.end);g.setEndPoint("StartToEnd",b);g.select()}};select.selectionTopNode=function(a,d){function g(a,d){if(d.nodeType==3){for(var g=0,b=d.previousSibling;b&&b.nodeType==3;)g+=b.nodeValue.length,b=b.previousSibling;if(b){try{a.moveToElementText(b)}catch(c){return!1}a.collapse(!1)}else a.moveToElementText(d.parentNode);g&&a.move("character",g)}else try{a.moveToElementText(d)}catch(n){return!1}return!0}var n=a.ownerDocument.selection;
if(!n)return!1;var n=n.createRange(),c=n.duplicate();n.collapse(d);var e=n.parentElement();if(e&&isAncestor(a,e)&&(c.moveToElementText(e),n.compareEndPoints("StartToStart",c)==1))return b(e,a);d=0;for(e=a.childNodes.length-1;d<e;){var l=Math.ceil((e+d)/2),f=a.childNodes[l];if(!f)return!1;if(!g(c,f))return!1;n.compareEndPoints("StartToStart",c)==1?d=l:e=l-1}return a.childNodes[d]||null};select.focusAfterNode=function(a,d){var g=d.ownerDocument.body.createTextRange();g.moveToElementText(a||d);g.collapse(!a);
g.select()};select.somethingSelected=function(a){return(a=a.document.selection)&&a.createRange().text!=""};var h=function(a,d){var g=a.document.selection;g&&(g=g.createRange(),g.pasteHTML(d),g.collapse(!1),g.select())};select.insertNewlineAtCursor=function(a){h(a,"<br>")};select.insertTabAtCursor=function(a){h(a,"\u00a0\u00a0\u00a0\u00a0")};select.cursorPos=function(a,d){var g=a.ownerDocument.selection;if(!g)return null;for(var b=select.selectionTopNode(a,d);b&&!isBR(b);)b=b.previousSibling;var g=
g.createRange(),c=g.duplicate();g.collapse(d);if(b)c.moveToElementText(b),c.collapse(!1);else{try{c.moveToElementText(a)}catch(e){return null}c.collapse(!0)}g.setEndPoint("StartToStart",c);return{node:b,offset:g.text.length}};select.setCursorPos=function(a,d,g){function b(d){var g=a.ownerDocument.body.createTextRange();d.node?(g.moveToElementText(d.node),g.collapse(!1)):(g.moveToElementText(a),g.collapse(!0));g.move("character",d.offset);return g}var c=b(d);g&&g!=d&&c.setEndPoint("EndToEnd",b(g));
c.select()};select.getBookmark=function(a){var d=select.cursorPos(a,!0),a=select.cursorPos(a,!1);if(d&&a)return{from:d,to:a}};select.setBookmark=function(a,d){d&&select.setCursorPos(a,d.from,d.to)}}else{select.markSelection=function(a){function d(a){for(;a.node.nodeType!=3&&!isBR(a.node);){var d=a.node.childNodes[a.offset]||a.node.nextSibling;for(a.offset=0;!d&&a.node.parentNode;)a.node=a.node.parentNode,d=a.node.nextSibling;a.node=d;if(!d)break}}var g=a.getSelection();if(!g||g.rangeCount==0)return c=
null;g=g.getRangeAt(0);c={start:{node:g.startContainer,offset:g.startOffset},end:{node:g.endContainer,offset:g.endOffset},window:a,changed:!1};d(c.start);d(c.end)};select.selectMarked=function(){function a(a,d){if(a.node)if(a.offset==0)b["set"+d+"Before"](a.node);else b["set"+d](a.node,a.offset);else b.setStartAfter(g.document.body.lastChild||g.document.body)}var d=c;if(d&&(d.changed||webkit&&d.start.node==d.end.node)){var g=d.window,b=g.document.createRange();a(d.end,"End");a(d.start,"Start");k(b,
g)}};var k=function(a,d){var g=d.getSelection();g.removeAllRanges();g.addRange(a)},j=function(a){a=a.getSelection();return!a||a.rangeCount==0?!1:a.getRangeAt(0)};select.selectionTopNode=function(a,d){var g=j(a.ownerDocument.defaultView);if(!g)return!1;var c=d?g.startContainer:g.endContainer,f=d?g.startOffset:g.endOffset;window.opera&&!d&&g.endContainer==a&&g.endOffset==g.startOffset+1&&a.childNodes[g.startOffset]&&isBR(a.childNodes[g.startOffset])&&f--;return c.nodeType==3?f>0?b(c,a):e(c,a):c.nodeName.toUpperCase()==
"HTML"?f==1?null:a.lastChild:c==a?f==0?null:c.childNodes[f-1]:f==c.childNodes.length?b(c,a):f==0?e(c,a):b(c.childNodes[f-1],a)};select.focusAfterNode=function(a,d){var g=d.ownerDocument.defaultView,b=g.document.createRange();b.setStartBefore(d.firstChild||d);a&&!a.firstChild?b.setEndAfter(a):a?b.setEnd(a,a.childNodes.length):b.setEndBefore(d.firstChild||d);b.collapse(!1);k(b,g)};select.somethingSelected=function(a){return(a=j(a))&&!a.collapsed};var i=function(a,d){var b=j(a);b&&(b.deleteContents(),
b.insertNode(d),webkitLastLineHack(a.document.body),b=a.document.createRange(),b.selectNode(d),b.collapse(!1),k(b,a))};select.insertNewlineAtCursor=function(a){i(a,a.document.createElement("BR"))};select.insertTabAtCursor=function(a){i(a,a.document.createTextNode("\u00a0\u00a0\u00a0\u00a0"))};select.cursorPos=function(a,d){var b=j(window);if(b){for(var c=select.selectionTopNode(a,d);c&&!isBR(c);)c=c.previousSibling;b=b.cloneRange();b.collapse(d);c?b.setStartAfter(c):b.setStartBefore(a);return{node:c,
offset:b.toString().length}}};select.setCursorPos=function(a,d,b){function c(d,b,g){function e(a){a.nodeType==3?n.push(a):forEach(a.childNodes,e)}if(d=d?d.nextSibling:a.firstChild){if(b==0)return f["set"+g+"Before"](d),!0;for(var n=[];;){for(;d&&!n.length;)e(d),d=d.nextSibling;var h=n.shift();if(!h)return!1;var j=h.nodeValue.length;if(j>=b)return f["set"+g](h,b),!0;b-=j}}}var e=a.ownerDocument.defaultView,f=e.document.createRange(),b=b||d;c(b.node,b.offset,"End")&&c(d.node,d.offset,"Start")&&k(f,
e)}}})();function History(b,e,c,f){this.container=b;this.maxDepth=e;this.commitDelay=c;this.editor=f;this.parent=f.parent;this.last=this.first=b={text:"",from:null,to:null};this.firstTouched=!1;this.history=[];this.redoHistory=[];this.touched=[]}
History.prototype={scheduleCommit:function(){var b=this;this.parent.clearTimeout(this.commitTimeout);this.commitTimeout=this.parent.setTimeout(function(){b.tryCommit()},this.commitDelay)},touch:function(b){this.setTouched(b);this.scheduleCommit()},undo:function(){this.commit();if(this.history.length){var b=this.history.pop();this.redoHistory.push(this.updateTo(b,"applyChain"));this.notifyEnvironment();return this.chainNode(b)}},redo:function(){this.commit();if(this.redoHistory.length){var b=this.redoHistory.pop();
this.addUndoLevel(this.updateTo(b,"applyChain"));this.notifyEnvironment();return this.chainNode(b)}},clear:function(){this.history=[];this.redoHistory=[]},historySize:function(){return{undo:this.history.length,redo:this.redoHistory.length}},push:function(b,e,c){for(var f=[],h=0;h<c.length;h++){var k=h==c.length-1?e:this.container.ownerDocument.createElement("BR");f.push({from:b,to:k,text:cleanText(c[h])});b=k}this.pushChains([f],b==null&&e==null);this.notifyEnvironment()},pushChains:function(b,e){this.commit(e);
this.addUndoLevel(this.updateTo(b,"applyChain"));this.redoHistory=[]},chainNode:function(b){for(var e=0;e<b.length;e++){var c=b[e][0];if(c=c&&(c.from||c.to))return c}},reset:function(){this.history=[];this.redoHistory=[]},textAfter:function(b){return this.after(b).text},nodeAfter:function(b){return this.after(b).to},nodeBefore:function(b){return this.before(b).from},tryCommit:function(){window.History&&(this.editor.highlightDirty()?this.commit(!0):this.scheduleCommit())},commit:function(b){this.parent.clearTimeout(this.commitTimeout);
b||this.editor.highlightDirty(!0);b=this.touchedChains();if(b.length)this.addUndoLevel(this.updateTo(b,"linkChain")),this.redoHistory=[],this.notifyEnvironment()},updateTo:function(b,e){for(var c=[],f=[],h=0;h<b.length;h++)c.push(this.shadowChain(b[h])),f.push(this[e](b[h]));e=="applyChain"&&this.notifyDirty(f);return c},notifyDirty:function(b){forEach(b,method(this.editor,"addDirtyNode"));this.editor.scheduleHighlight()},notifyEnvironment:function(){window.frameElement&&window.frameElement.CodeMirror.updateNumbers&&
window.frameElement.CodeMirror.updateNumbers();if(this.onChange)try{this.onChange()}catch(b){}},linkChain:function(b){for(var e=0;e<b.length;e++){var c=b[e];c.from?c.from.historyAfter=c:this.first=c;c.to?c.to.historyBefore=c:this.last=c}},after:function(b){return b?b.historyAfter:this.first},before:function(b){return b?b.historyBefore:this.last},setTouched:function(b){if(b){if(!b.historyTouched)this.touched.push(b),b.historyTouched=!0}else this.firstTouched=!0},addUndoLevel:function(b){this.history.push(b);
this.history.length>this.maxDepth&&this.history.shift()},touchedChains:function(){function b(b){for(var e=[],a=b?b.nextSibling:c.container.firstChild;a&&!isBR(a);a=a.nextSibling)a.currentText&&e.push(a.currentText);return{from:b,to:a,text:cleanText(e.join(""))}}function e(b,c){for(var a=c+"Sibling",d=b[a];d&&!isBR(d);)d=d[a];return d}var c=this,f=null,h=[];c.firstTouched&&c.touched.push(null);forEach(c.touched,function(e){if(!(e&&e.parentNode!=c.container)){e?e.historyTouched=!1:c.firstTouched=!1;
var i=b(e),a=c.after(e);if(!a||a.text!=i.text||a.to!=i.to)h.push(i),e?e.historyTemp=i:f=i}});var k=[];c.touched=[];forEach(h,function(h){if(h.from?h.from.historyTemp:f){for(var i=[],a=h.from,d=!0;;){var g=a?a.historyTemp:f;if(!g)if(d)break;else g=b(a);i.unshift(g);a?a.historyTemp=null:f=null;if(!a)break;d=c.after(a);a=e(a,"previous")}a=h.to;for(d=c.before(h.from);;){if(!a)break;g=a?a.historyTemp:f;if(!g)if(d)break;else g=b(a);i.push(g);a?a.historyTemp=null:f=null;d=c.before(a);a=e(a,"next")}k.push(i)}});
return k},shadowChain:function(b){for(var e=[],c=this.after(b[0].from),b=b[b.length-1].to;;)if(e.push(c),c=c.to,!c||c==b)break;else c=c.historyAfter||this.before(b);return e},applyChain:function(b){var e=select.cursorPos(this.container,!1),c=this,f=b[0].from,h=b[b.length-1].to;(function(a,d){for(var b=a?a.nextSibling:c.container.firstChild;b!=d;){var e=b.nextSibling;removeElement(b);b=e}})(f,h);for(var k=0;k<b.length;k++){var j=b[k];k>0&&c.container.insertBefore(j.from,h);var i=makePartSpan(fixSpaces(j.text),
this.container.ownerDocument);c.container.insertBefore(i,h);if(e&&e.node==j.from){var i=0,a=this.after(j.from);if(a&&k==b.length-1){for(var d=0;d<e.offset&&j.text.charAt(d)==a.text.charAt(d);d++);e.offset>d&&(i=j.text.length-a.text.length)}select.setCursorPos(this.container,{node:j.from,offset:Math.max(0,e.offset+i)})}else e&&k==b.length-1&&e.node&&e.node.parentNode!=this.container&&select.setCursorPos(this.container,{node:j.from,offset:j.text.length})}this.linkChain(b);return f}};function makeWhiteSpace(b){for(var e=[],c=!0;b>0;b--)e.push(c||b==1?nbsp:" "),c=!c;return e.join("")}function fixSpaces(b){b.charAt(0)==" "&&(b=nbsp+b.slice(1));return b.replace(/\t/g,function(){return makeWhiteSpace(indentUnit)}).replace(/[ \u00a0]{2,}/g,function(b){return makeWhiteSpace(b.length)})}function cleanText(b){return b.replace(/\u00a0/g," ").replace(/\u200b/g,"")}
function makePartSpan(b,e){var c=b;b.nodeType==3?c=b.nodeValue:b=e.createTextNode(c);var f=e.createElement("SPAN");f.isPart=!0;f.appendChild(b);f.currentText=c;return f}
var webkitLastLineHack=webkit?function(b){var e=b.lastChild;(!e||!e.isPart||e.textContent!="\u200b")&&b.appendChild(makePartSpan("\u200b",b.ownerDocument))}:function(){},Editor=function(){function b(a){var d=makeWhiteSpace(indentUnit);return map(a.replace(/\t/g,d).replace(/\u00a0/g," ").replace(/\r\n?/g,"\n").split("\n"),fixSpaces)}function e(a,d){function b(a,h){a.nodeType==3?((a.nodeValue=fixSpaces(a.nodeValue.replace(/[\r\u200b]/g,"").replace(/\n/g," "))).length&&(f=!1),e.push(a)):isBR(a)&&a.childNodes.length==
0?(f=!0,e.push(a)):(forEach(a.childNodes,b),!f&&i.hasOwnProperty(a.nodeName.toUpperCase())&&(f=!0,(!d||!h)&&e.push(c.createElement("BR"))))}var c=a.ownerDocument,e=[],f=!0;b(a,!0);return e}function c(a){function d(a,d){i=d;return a}function b(a,d,g){return function(){return a(d,g)}}function c(){i=c;throw StopIteration;}function f(a){var d=a.parentNode,b=a.nextSibling;return function(a){d.insertBefore(a,b)}}function h(a){var d="\n";a.nodeType==3?(select.snapshotChanged(),a=makePartSpan(a,k),d=a.currentText,
o=!1):(o&&window.opera&&m(makePartSpan("",k)),o=!0);a.dirty=!0;s.push(a);m(a);return d}function l(a,b,g){var c=[];forEach(e(a,g),function(a){c.push(h(a))});return d(c.join(""),b)}function j(a,c){a.nextSibling&&(c=b(j,a.nextSibling,c));var e;a.isPart&&a.childNodes.length==1&&a.firstChild.nodeType==3?(a.currentText=a.firstChild.nodeValue,e=!/[\n\t\r]/.test(a.currentText)):e=!1;return e?(s.push(a),o=!1,d(a.currentText,c)):isBR(a)?(o&&window.opera&&a.parentNode.insertBefore(makePartSpan("",k),a),s.push(a),
o=!0,d("\n",c)):(e=!a.nextSibling,m=f(a),removeElement(a),l(a,c,e))}var i=b(j,a,c),k=a.ownerDocument,s=[],m=null,o=!0;return{next:function(){return i()},nodes:s}}function f(a){for(;a&&!isBR(a);)a=a.previousSibling;return a}function h(a,d){if(a){if(isBR(a))a=a.nextSibling}else a=d.firstChild;for(;a&&!isBR(a);)a=a.nextSibling;return a}function k(a,d,b,c){this.editor=a;(this.caseFold=c)&&(d=d.toLowerCase());this.history=a.history;this.history.commit();this.atOccurrence=!1;this.fallbackSize=15;var e;
b&&(e=select.cursorPos(this.editor.container))?(this.line=e.node,this.offset=e.offset):(this.line=null,this.offset=0);this.valid=!!d;var f=d.split("\n"),h=this;this.matches=f.length==1?function(){var a=cleanText(h.history.textAfter(h.line).slice(h.offset)),a=(h.caseFold?a.toLowerCase():a).indexOf(d);if(a>-1)return{from:{node:h.line,offset:h.offset+a},to:{node:h.line,offset:h.offset+a+d.length}}}:function(){var a=cleanText(h.history.textAfter(h.line).slice(h.offset)),d=(h.caseFold?a.toLowerCase():
a).lastIndexOf(f[0]);if(d==-1||d!=a.length-f[0].length)return!1;for(var a=h.offset+d,d=h.history.nodeAfter(h.line),b=1;b<f.length-1;b++){d=cleanText(h.history.textAfter(d));if((h.caseFold?d.toLowerCase():d)!=f[b])return!1;d=h.history.nodeAfter(d)}b=cleanText(h.history.textAfter(d));return(h.caseFold?b.toLowerCase():b).indexOf(f[f.length-1])!=0?!1:{from:{node:h.line,offset:a},to:{node:d,offset:f[f.length-1].length}}}}function j(a){this.options=a;window.indentUnit=a.indentUnit;this.parent=parent;this.doc=
document;var d=this.container=this.doc.body;this.win=window;this.history=new History(d,a.undoDepth,a.undoDelay,this);var b=this;if(!j.Parser)throw"No parser loaded.";a.parserConfig&&j.Parser.configure&&j.Parser.configure(a.parserConfig);a.readOnly||select.setCursorPos(d,{node:null,offset:0});this.dirty=[];a.content&&this.importCode(a.content);this.history.onChange=a.onChange;if(a.readOnly){if(!a.textWrapping)d.style.whiteSpace="nowrap"}else{if(a.continuousScanning!==!1)this.scanner=this.documentScanner(a.passTime),
this.delayScanning();var c=function(){document.body.contentEditable!=void 0&&internetExplorer?document.body.contentEditable="true":document.designMode="on";document.documentElement.style.borderWidth="0";if(!a.textWrapping)d.style.whiteSpace="nowrap"};try{c()}catch(e){var f=addEventHandler(document,"focus",function(){f();c()},!0)}addEventHandler(document,"keydown",method(this,"keyDown"));addEventHandler(document,"keypress",method(this,"keyPress"));addEventHandler(document,"keyup",method(this,"keyUp"));
var h=function(){b.cursorActivity(!1)};addEventHandler(document.body,"mouseup",h);addEventHandler(document.body,"cut",h);addEventHandler(document.body,"paste",function(a){h();var d=null;try{var c=a.clipboardData||window.clipboardData;c&&(d=c.getData("Text"))}catch(e){}d!==null&&(a.stop(),b.replaceSelection(d),select.scrollToCursor(this.container))});this.options.autoMatchParens&&addEventHandler(document.body,"click",method(this,"scheduleParenHighlight"))}}var i={P:!0,DIV:!0,LI:!0};k.prototype={findNext:function(){function a(a){d.history.textAfter(a.node).length>
a.offset?(d.line=a.node,d.offset=a.offset+1):(d.line=d.history.nodeAfter(a.node),d.offset=0)}if(!this.valid)return!1;this.atOccurrence=!1;var d=this;if(this.line&&!this.line.parentNode)this.line=null,this.offset=0;for(;;){var b=this.matches();if(b)return this.atOccurrence=b,a(b.from),!0;this.line=this.history.nodeAfter(this.line);this.offset=0;if(!this.line)return this.valid=!1}},select:function(){this.atOccurrence&&(select.setCursorPos(this.editor.container,this.atOccurrence.from,this.atOccurrence.to),
select.scrollToCursor(this.editor.container))},replace:function(a){if(this.atOccurrence)a=this.editor.replaceRange(this.atOccurrence.from,this.atOccurrence.to,a),this.line=a.node,this.offset=a.offset,this.atOccurrence=!1}};j.prototype={importCode:function(a){this.history.push(null,null,b(a));this.history.reset()},getCode:function(){if(!this.container.firstChild)return"";var a=[];select.markSelection(this.win);forEach(c(this.container.firstChild),method(a,"push"));webkitLastLineHack(this.container);
select.selectMarked();return cleanText(a.join(""))},checkLine:function(a){if(a===!1||!(a==null||a.parentNode==this.container))throw parent.CodeMirror.InvalidLineHandle;},cursorPosition:function(a){a==null&&(a=!0);return(a=select.cursorPos(this.container,a))?{line:a.node,character:a.offset}:{line:null,character:0}},firstLine:function(){return null},lastLine:function(){return this.container.lastChild?f(this.container.lastChild):null},nextLine:function(a){this.checkLine(a);return h(a,this.container)||
!1},prevLine:function(a){this.checkLine(a);return a==null?!1:f(a.previousSibling)},selectLines:function(a,d,b,c){this.checkLine(a);a={node:a,offset:d};d=null;c!==void 0&&(this.checkLine(b),d={node:b,offset:c});select.setCursorPos(this.container,a,d);select.scrollToCursor(this.container)},lineContent:function(a){this.checkLine(a);for(var d=[],a=a?a.nextSibling:this.container.firstChild;a&&!isBR(a);a=a.nextSibling)d.push(nodeText(a));return cleanText(d.join(""))},setLineContent:function(a,d){this.history.commit();
this.replaceRange({node:a,offset:0},{node:a,offset:this.history.textAfter(a).length},d);this.addDirtyNode(a);this.scheduleHighlight()},insertIntoLine:function(a,d,g){var c=null;if(d=="end")c=h(a,this.container);else for(var e=a?a.nextSibling:this.container.firstChild;e;e=e.nextSibling){if(d==0){c=e;break}var f=nodeText(e);if(f.length>d){c=e.nextSibling;g=f.slice(0,d)+g+f.slice(d);removeElement(e);break}d-=f.length}d=b(g);g=this.container.ownerDocument;for(e=0;e<d.length;e++)e>0&&this.container.insertBefore(g.createElement("BR"),
c),this.container.insertBefore(makePartSpan(d[e],g),c);this.addDirtyNode(a);this.scheduleHighlight()},selectedText:function(){var a=this.history;a.commit();var d=select.cursorPos(this.container,!0),b=select.cursorPos(this.container,!1);if(!d||!b)return"";if(d.node==b.node)return a.textAfter(d.node).slice(d.offset,b.offset);for(var c=[a.textAfter(d.node).slice(d.offset)],d=a.nodeAfter(d.node);d!=b.node;d=a.nodeAfter(d))c.push(a.textAfter(d));c.push(a.textAfter(b.node).slice(0,b.offset));return cleanText(c.join("\n"))},
replaceSelection:function(a){this.history.commit();var d=select.cursorPos(this.container,!0),b=select.cursorPos(this.container,!1);d&&b&&(b=this.replaceRange(d,b,a),select.setCursorPos(this.container,b),webkitLastLineHack(this.container))},reroutePasteEvent:function(){if(!this.capturingPaste&&!window.opera){this.capturingPaste=!0;var a=parent.document.createElement("TEXTAREA");a.style.position="absolute";a.style.left="-10000px";a.style.width="10px";a.style.top=nodeTop(frameElement)+"px";window.frameElement.CodeMirror.wrapping.appendChild(a);
parent.focus();a.focus();var d=this;this.parent.setTimeout(function(){d.capturingPaste=!1;d.win.focus();d.selectionSnapshot&&d.win.select.setBookmark(d.container,d.selectionSnapshot);var b=a.value;b&&(d.replaceSelection(b),select.scrollToCursor(d.container));removeElement(a)},10)}},replaceRange:function(a,d,c){c=b(c);c[0]=this.history.textAfter(a.node).slice(0,a.offset)+c[0];var e=c[c.length-1];c[c.length-1]=e+this.history.textAfter(d.node).slice(d.offset);d=this.history.nodeAfter(d.node);this.history.push(a.node,
d,c);return{node:this.history.nodeBefore(d),offset:e.length}},getSearchCursor:function(a,d,b){return new k(this,a,d,b)},reindent:function(){this.container.firstChild&&this.indentRegion(null,this.container.lastChild)},reindentSelection:function(a){if(select.somethingSelected(this.win)){var b=select.selectionTopNode(this.container,!0),c=select.selectionTopNode(this.container,!1);b===!1||c===!1||this.indentRegion(b,c,a)}else this.indentAtCursor(a)},grabKeys:function(a,b){this.frozen=a;this.keyFilter=
b},ungrabKeys:function(){this.frozen="leave";this.keyFilter=null},setParser:function(a){j.Parser=window[a];this.container.firstChild&&(forEach(this.container.childNodes,function(a){if(a.nodeType!=3)a.dirty=!0}),this.addDirtyNode(this.firstChild),this.scheduleHighlight())},keyDown:function(a){if(this.frozen=="leave")this.frozen=null;if(this.frozen&&(!this.keyFilter||this.keyFilter(a.keyCode)))a.stop(),this.frozen(a);else{var b=a.keyCode;this.delayScanning();this.options.autoMatchParens&&this.scheduleParenHighlight();
if(b==13)a.ctrlKey&&!a.altKey?this.reparseBuffer():(select.insertNewlineAtCursor(this.win),this.indentAtCursor(),select.scrollToCursor(this.container)),a.stop();else if(b==9&&this.options.tabMode!="default"&&!a.ctrlKey)this.handleTab(!a.shiftKey),a.stop();else if(b==32&&a.shiftKey&&this.options.tabMode=="default")this.handleTab(!0),a.stop();else if(b==36&&!a.shiftKey&&!a.ctrlKey)this.home()&&a.stop();else if(b==35&&!a.shiftKey&&!a.ctrlKey)this.end()&&a.stop();else if((b==219||b==221)&&a.ctrlKey&&
!a.altKey)this.highlightParens(a.shiftKey,!0),a.stop();else if(a.metaKey&&!a.shiftKey&&(b==37||b==39)){var c=select.selectionTopNode(this.container);c!==!1&&this.container.firstChild&&(b==37?select.focusAfterNode(f(c),this.container):(b=h(c,this.container),select.focusAfterNode(b?b.previousSibling:this.container.lastChild,this.container)),a.stop())}else if((a.ctrlKey||a.metaKey)&&!a.altKey)a.shiftKey&&b==90||b==89?(select.scrollToNode(this.history.redo()),a.stop()):b==90||safari&&b==8?(select.scrollToNode(this.history.undo()),
a.stop()):b==83&&this.options.saveFunction?(this.options.saveFunction(),a.stop()):internetExplorer&&b==86&&this.reroutePasteEvent()}},keyPress:function(a){var b=j.Parser.electricChars,c=this;this.frozen&&(!this.keyFilter||this.keyFilter(a.keyCode))||a.code==13||a.code==9&&this.options.tabMode!="default"||a.keyCode==32&&a.shiftKey&&this.options.tabMode=="default"?a.stop():b&&b.indexOf(a.character)!=-1?this.parent.setTimeout(function(){c.indentAtCursor(null)},0):(a.character=="v"||a.character=="V")&&
(a.ctrlKey||a.metaKey)&&!a.altKey&&this.reroutePasteEvent()},keyUp:function(a){this.cursorActivity(a.keyCode>=16&&a.keyCode<=18||a.keyCode>=33&&a.keyCode<=40)},indentLineAfter:function(a,b){var c=a?a.nextSibling:this.container.firstChild;c&&!hasClass(c,"whitespace")&&(c=null);var e=c?c.nextSibling:a?a.nextSibling:this.container.firstChild,f=a&&e&&e.currentText?e.currentText:"",h=0,l=c?c.currentText.length:0;b!=null&&this.options.tabMode=="shift"?h=b?l+indentUnit:Math.max(0,l-indentUnit):a?h=a.indentation(f,
l,b):j.Parser.firstIndentation&&(h=j.Parser.firstIndentation(f,l,b));f=h-l;if(f<0)h==0?(e&&select.snapshotMove(c.firstChild,e.firstChild,0),removeElement(c),c=null):(select.snapshotMove(c.firstChild,c.firstChild,f,!0),c.currentText=makeWhiteSpace(h),c.firstChild.nodeValue=c.currentText);else if(f>0)c?(c.currentText=makeWhiteSpace(h),c.firstChild.nodeValue=c.currentText):(c=makePartSpan(makeWhiteSpace(h),this.doc),c.className="whitespace",a?insertAfter(c,a):this.container.insertBefore(c,this.container.firstChild)),
e&&select.snapshotMove(e.firstChild,c.firstChild,l,!1,!0);f!=0&&this.addDirtyNode(a);return c},highlightAtCursor:function(){var a=select.selectionTopNode(this.container,!0),b=select.selectionTopNode(this.container,!1);if(!(a===!1||b===!1)){select.markSelection(this.win);if(this.highlight(a,h(b,this.container),!0,20)===!1)return!1;select.selectMarked();return!0}},handleTab:function(a){this.options.tabMode=="spaces"?select.insertTabAtCursor(this.win):this.reindentSelection(a)},home:function(){var a=
select.selectionTopNode(this.container,!0),b=a;if(a===!1||a&&!a.isPart&&!isBR(a)||!this.container.firstChild)return!1;for(;a&&!isBR(a);)a=a.previousSibling;var c=a?a.nextSibling:this.container.firstChild;c&&c!=b&&c.isPart&&hasClass(c,"whitespace")?select.focusAfterNode(c,this.container):select.focusAfterNode(a,this.container);select.scrollToCursor(this.container);return!0},end:function(){var a=select.selectionTopNode(this.container,!0);if(a===!1)return!1;a=h(a,this.container);if(!a)return!1;select.focusAfterNode(a.previousSibling,
this.container);select.scrollToCursor(this.container);return!0},scheduleParenHighlight:function(){this.parenEvent&&this.parent.clearTimeout(this.parenEvent);var a=this;this.parenEvent=this.parent.setTimeout(function(){a.highlightParens()},300)},highlightParens:function(a,b){function c(a,b){if(a)l.options.markParen?l.options.markParen(a,b):(a.style.fontWeight="bold",a.style.color=b?"#8F8":"#F88")}function e(a){if(a)l.options.unmarkParen?l.options.unmarkParen(a):(a.style.fontWeight="",a.style.color=
"")}function f(a){if(a.currentText)return(a=a.currentText.match(/^[\s\u00a0]*([\(\)\[\]{}])[\s\u00a0]*$/))&&a[1]}function j(){for(var a=[],b,d=!0,c=k;c;c=s?c.nextSibling:c.previousSibling)if(c.className==v&&isSpan(c)&&(b=f(c))){if(/[\(\[\{]/.test(b)==s?a.push(b):a.length?a.pop()!=matching[b]&&(d=!1):d=!1,!a.length)break}else if(c.dirty||!isSpan(c)&&!isBR(c))return{node:c,status:"dirty"};return{node:c,status:c&&d}}var l=this;!b&&l.highlighted&&(e(l.highlighted[0]),e(l.highlighted[1]));if(window.select){this.parenEvent&&
this.parent.clearTimeout(this.parenEvent);this.parenEvent=null;var i,k=select.selectionTopNode(this.container,!0);if(k&&this.highlightAtCursor()&&(k=select.selectionTopNode(this.container,!0))&&((i=f(k))||(k=k.nextSibling)&&(i=f(k))))for(var v=k.className,s=/[\(\[\{]/.test(i);;){var m=j();if(m.status=="dirty")this.highlight(m.node,h(m.node)),m.node.dirty=!1;else{c(k,m.status);c(m.node,m.status);b?l.parent.setTimeout(function(){e(k);e(m.node)},500):l.highlighted=[k,m.node];a&&m.node&&select.focusAfterNode(m.node.previousSibling,
this.container);break}}}},indentAtCursor:function(a){if(this.container.firstChild&&this.highlightAtCursor()){var b=select.selectionTopNode(this.container,!1);if(b!==!1){var c=f(b),a=this.indentLineAfter(c,a);b==c&&a&&(b=a);b==a&&select.focusAfterNode(b,this.container)}}},indentRegion:function(a,b,c){var e=a=f(a),i=a&&f(a.previousSibling);isBR(b)||(b=h(b,this.container));do{var k=h(e,this.container);e&&this.highlight(i,k,!0);this.indentLineAfter(e,c);i=e;e=k}while(e!=b);select.setCursorPos(this.container,
{node:a,offset:0},{node:b,offset:0})},cursorActivity:function(a){if(internetExplorer)this.container.createTextRange().execCommand("unlink"),this.selectionSnapshot=select.getBookmark(this.container);var b=this.options.cursorActivity;if(!a||b){var c=select.selectionTopNode(this.container,!1);c!==!1&&this.container.firstChild&&(c=c||this.container.firstChild,b&&b(c),a||(this.scheduleHighlight(),this.addDirtyNode(c)))}},reparseBuffer:function(){forEach(this.container.childNodes,function(a){a.dirty=!0});
this.container.firstChild&&this.addDirtyNode(this.container.firstChild)},addDirtyNode:function(a){if(a=a||this.container.firstChild){for(var b=0;b<this.dirty.length;b++)if(this.dirty[b]==a)return;if(a.nodeType!=3)a.dirty=!0;this.dirty.push(a)}},scheduleHighlight:function(){var a=this;this.parent.clearTimeout(this.highlightTimeout);this.highlightTimeout=this.parent.setTimeout(function(){a.highlightDirty()},this.options.passDelay)},getDirtyNode:function(){for(;this.dirty.length>0;){var a=this.dirty.pop();
try{for(;a&&a.parentNode!=this.container;)a=a.parentNode;if(a&&(a.dirty||a.nodeType==3))return a}catch(b){}}return null},highlightDirty:function(a){if(window.select){this.options.readOnly||select.markSelection(this.win);for(var b,c=a?null:(new Date).getTime()+this.options.passTime;((new Date).getTime()<c||a)&&(b=this.getDirtyNode());){var e=this.highlight(b,c);e&&e.node&&e.dirty&&this.addDirtyNode(e.node)}this.options.readOnly||select.selectMarked();b&&this.scheduleHighlight();return this.dirty.length==
0}},documentScanner:function(a){var b=this,c=null;return function(){if(window.select){c&&c.parentNode!=b.container&&(c=null);select.markSelection(b.win);var e=b.highlight(c,(new Date).getTime()+a,!0);select.selectMarked();e=e?e.node&&e.node.nextSibling:null;c=c==e?null:e;b.delayScanning()}}},delayScanning:function(){if(this.scanner)this.parent.clearTimeout(this.documentScan),this.documentScan=this.parent.setTimeout(this.scanner,this.options.continuousScanning)},highlight:function(a,b,e,f){function h(a){if(a){var b=
a.oldNextSibling;(o||b===void 0||a.nextSibling!=b)&&k.history.touch(a);a.oldNextSibling=a.nextSibling}else b=k.container.oldFirstChild,(o||b===void 0||k.container.firstChild!=b)&&k.history.touch(null),k.container.oldFirstChild=k.container.firstChild}var i=this.container,k=this,z=this.options.activeTokens,x=typeof b=="number"?b:null;if(i.firstChild){for(;a&&(!a.parserFromHere||a.dirty);){if(f!=null&&isBR(a)&&--f<0)return!1;a=a.previousSibling}if(!a||a.nextSibling){var v=c(a?a.nextSibling:i.firstChild),
f=stringStream(v),s=a?a.parserFromHere(f):j.Parser.make(f),m={current:null,get:function(){if(!this.current)this.current=v.nodes.shift();return this.current},next:function(){this.current=null},remove:function(){i.removeChild(this.get());this.current=null},getNonEmpty:function(){for(var a=this.get();a&&isSpan(a)&&a.currentText=="";)if(window.opera&&(a.previousSibling==null||isBR(a.previousSibling))&&(a.nextSibling==null||isBR(a.nextSibling)))this.next(),a=this.get();else{var b=a;this.remove();a=this.get();
select.snapshotMove(b.firstChild,a&&(a.firstChild||a),0)}return a}},o=!1,w=!0,u=0;forEach(s,function(c){var f=m.getNonEmpty();if(c.value=="\n"){if(!isBR(f))throw"Parser out of sync. Expected BR.";if(f.dirty||!f.indentation)o=!0;h(a);a=f;f.parserFromHere=s.copy();f.indentation=c.indentation;f.dirty=!1;if(x==null&&f==b)throw StopIteration;if(x!=null&&(new Date).getTime()>=x||!o&&!w&&u>1&&!e)throw StopIteration;w=o;o=!1;u=0;m.next()}else{if(!isSpan(f))throw"Parser out of sync. Expected SPAN.";f.dirty&&
(o=!0);u++;if(!f.reduced&&f.currentText==c.value&&f.className==c.style)f.dirty=!1,m.next();else{o=!0;var j=makePartSpan(c.value,k.doc);j.className=c.style;i.insertBefore(j,f);z&&z(j,c,k);for(var c=c.value.length,n=0;c>0;){var f=m.get(),r=f.currentText.length;select.snapshotReplaceNode(f.firstChild,j.firstChild,c,n);r>c?(f.currentText=f.currentText.substring(c),f.reduced=!0,c=0):(c-=r,n+=r,m.remove())}}}});h(a);webkitLastLineHack(this.container);return{node:m.getNonEmpty(),dirty:o}}}}};return j}();
addEventHandler(window,"load",function(){var b=window.frameElement.CodeMirror;b.editor=new Editor(b.options);this.parent.setTimeout(method(b,"init"),0)});function tokenizer(b,e){function c(b){return b!="\n"&&/^[\s\u00a0]*$/.test(b)}var f={state:e,take:function(e){typeof e=="string"&&(e={style:e,type:e});e.content=(e.content||"")+b.get();/\n$/.test(e.content)||b.nextWhile(c);e.value=e.content+b.get();return e},next:function(){if(!b.more())throw StopIteration;var e;if(b.equals("\n"))return b.next(),this.take("whitespace");if(b.applies(c))e="whitespace";else for(;!e;)e=this.state(b,function(b){f.state=b});return this.take(e)}};return f};var XMLParser=Editor.Parser=function(){var b={autoSelfClosers:{br:!0,img:!0,hr:!0,link:!0,input:!0,meta:!0,col:!0,frame:!0,base:!0,area:!0},doNotIndent:{pre:!0,"!cdata":!0}},e={autoSelfClosers:{},doNotIndent:{"!cdata":!0}},c=b,f=!1,h=function(){function b(d,e){var f=d.next();if(f=="<")return d.equals("!")?(d.next(),d.equals("[")?d.lookAhead("[CDATA[",!0)?(e(a("xml-cdata","]]\>")),null):"xml-text":d.lookAhead("--",!0)?(e(a("xml-comment","--\>")),null):"xml-text"):d.equals("?")?(d.next(),d.nextWhileMatches(/[\w\._\-]/),
e(a("xml-processing","?>")),"xml-processing"):(d.equals("/")&&d.next(),e(c),"xml-punctuation");else if(f=="&"){for(;!d.endOfLine();)if(d.next()==";")break;return"xml-entity"}else return d.nextWhileMatches(/[^&<\n]/),"xml-text"}function c(a,f){var h=a.next();return h==">"?(f(b),"xml-punctuation"):/[?\/]/.test(h)&&a.equals(">")?(a.next(),f(b),"xml-punctuation"):h=="="?"xml-punctuation":/[\'\"]/.test(h)?(f(e(h)),null):(a.nextWhileMatches(/[^\s\u00a0=<>\"\'\/?]/),"xml-name")}function e(a){return function(b,
e){for(;!b.endOfLine();)if(b.next()==a){e(c);break}return"xml-attribute"}}function a(a,c){return function(e,f){for(;!e.endOfLine();){if(e.lookAhead(c,!0)){f(b);break}e.next()}return a}}return function(a,c){return tokenizer(a,c||b)}}();return{make:function(b){function e(a){for(var b=a.length-1;b>=0;b--)w.push(a[b])}function i(){e(arguments);B=!0}function a(){e(arguments);B=!1}function d(a){return function(b,c){c==a?i():(r="xml-error",i(arguments.callee))}}function g(a,b){var d=c.doNotIndent.hasOwnProperty(a)||
q&&q.noIndent;q={prev:q,name:a,indent:y,startOfLine:b,noIndent:d}}function n(a){return function(b,c){var d=a;if(d&&d.noIndent)return c;if(f&&/<!\[CDATA\[/.test(b))return 0;if(d&&/^<\//.test(b))d=d.prev;for(;d&&!d.startOfLine;)d=d.prev;return d?d.indent+indentUnit:0}}function p(){return a(t,p)}function t(a,b){if(b=="<")i(l,v,x(u==1));else if(b=="</")i(z,d(">"));else{if(a=="xml-cdata"){if((!q||q.name!="!cdata")&&g("!cdata"),/\]\]>$/.test(b))q=q.prev}else C.hasOwnProperty(a)||(r="xml-error");i()}}function l(b,
c){b=="xml-name"?(A=c.toLowerCase(),r="xml-tagname",i()):(A=null,a())}function z(a,b){a=="xml-name"&&q&&b.toLowerCase()==q.name?(q=q.prev,r="xml-tagname"):r="xml-error";i()}function x(a){return function(b,d){d=="/>"||d==">"&&c.autoSelfClosers.hasOwnProperty(A)?i():d==">"?g(A,a)||i():(r="xml-error",i(arguments.callee))}}function v(b){b=="xml-name"?(r="xml-attname",i(s,v)):a()}function s(b,c){c=="="?i(m):c==">"||c=="/>"?a(x):a()}function m(b){b=="xml-attribute"?i(m):a()}var o=h(b),w=[p],u=0,y=0,A=null,
q=null,B,r,C={"xml-text":!0,"xml-entity":!0,"xml-comment":!0,"xml-processing":!0};return{indentation:function(){return y},next:function(){var a=o.next();a.style=="whitespace"&&u==0?y=a.value.length:u++;if(a.content=="\n")y=u=0,a.indentation=n(q);if(a.style=="whitespace"||a.type=="xml-comment")return a;for(;;)if(B=r=!1,w.pop()(a.style,a.content),B){if(r)a.style=r;return a}},copy:function(){var a=w.concat([]),b=o.state,c=q,d=this;return function(e){w=a.concat([]);u=y=0;q=c;o=h(e,b);return d}}}},electricChars:"/",
configure:function(h){h.useHTMLKludges!=null&&(c=h.useHTMLKludges?b:e);if(h.alignCDATA)f=h.alignCDATA}}}();(function(b){var e={distance:5,iterations:4,duration:50};b.fn.shake=function(c){var f=this,h=b.extend({},e,c),c=h.distance,k=h.iterations,j=h.duration,i=parseInt(f.css("left")),a=0;isNaN(i)&&(i=0);for(b.inArray(f.css("position"),["absolute","fixed","relative"])<0&&f.css({position:"relative"});a<k;)a==0?(f.animate({left:"-="+c*1.2+"px"},{duration:j,easing:"easeInOutCubic"}),f.animate({left:"+="+c*2.4+"px"},{duration:j,easing:"easeInOutCubic"}),f.animate({left:"-="+c*2.2+"px"},{duration:j,easing:"easeInOutCubic"}),
f.animate({left:"+="+2*c+"px"},{duration:j,easing:"easeInOutCubic"}),a++):(f.animate({left:"-="+2*c+"px"},{duration:j,easing:"easeInOutCubic"}),f.animate({left:"+="+2*c+"px"},{duration:j,easing:"easeInOutCubic"})),c-=c*0.3,a++;f.animate({left:i},{duration:j,easing:"easeInOutCubic",complete:function(){f.css({position:h.position||"",left:""});typeof h.complete==="function"&&h.complete.call(this)}});return this}})(jQuery);
